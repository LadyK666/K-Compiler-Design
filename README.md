# ç¼–è¯‘å™¨é¡¹ç›® - å®Œæ•´å®žçŽ°

## ðŸ“š é¡¹ç›®æ¦‚è¿°

è¿™æ˜¯ä¸€ä¸ªå®Œæ•´çš„ç¼–è¯‘å™¨å®žçŽ°é¡¹ç›®ï¼Œä»Žè¯æ³•åˆ†æžåˆ°ç›®æ ‡ä»£ç ç”Ÿæˆï¼Œæ¶µç›–äº†ç¼–è¯‘åŽŸç†çš„æ ¸å¿ƒå†…å®¹ã€‚è¯¥ç¼–è¯‘å™¨é’ˆå¯¹ä¸€ç§ç±»Cè¯­è¨€çš„ç®€åŒ–è¯­è¨€ï¼Œèƒ½å¤Ÿç”Ÿæˆå¯åœ¨MIPSæ¨¡æ‹Ÿå™¨ï¼ˆMARS/QTSPIMï¼‰ä¸Šè¿è¡Œçš„æ±‡ç¼–ä»£ç ã€‚

---

## ðŸ› ï¸ ç¼–è¯‘å·¥å…·é“¾

```
æºä»£ç  (.txt)
    â†“
[è¯æ³•åˆ†æž - Flex]
    â†“
Tokenåºåˆ—
    â†“
[è¯­æ³•åˆ†æž - Bison]
    â†“
æŠ½è±¡è¯­æ³•æ ‘ (AST)
    â†“
[è¯­ä¹‰åˆ†æž]
    â†“
å¸¦ç±»åž‹ä¿¡æ¯çš„AST + ç¬¦å·è¡¨
    â†“
[ä¸­é—´ä»£ç ç”Ÿæˆ]
    â†“
ä¸‰åœ°å€ç  (TAC)
    â†“
[ä»£ç ä¼˜åŒ–]
    â†“
ä¼˜åŒ–åŽçš„TAC
    â†“
[MIPSä»£ç ç”Ÿæˆ]
    â†“
MIPSæ±‡ç¼–ä»£ç  (.asm)
    â†“
[MARS/QTSPIM]
    â†“
å¯æ‰§è¡Œç¨‹åº
```

---

## ðŸ“‹ ä¸€çº§ç›®å½•ç»“æž„

```
step2/
â”œâ”€â”€ æ ¸å¿ƒæºä»£ç æ–‡ä»¶
â”‚   â”œâ”€â”€ lex.l                    # Flexè¯æ³•åˆ†æžå™¨å®šä¹‰
â”‚   â”œâ”€â”€ parser.y                 # Bisonè¯­æ³•åˆ†æžå™¨å®šä¹‰
â”‚   â”œâ”€â”€ def.h                    # æ•°æ®ç»“æž„å’Œå‡½æ•°å£°æ˜Ž
â”‚   â”œâ”€â”€ displayAST.c             # ASTæž„å»ºå’Œæ˜¾ç¤º
â”‚   â”œâ”€â”€ semantics.c              # è¯­ä¹‰åˆ†æžå’Œç¬¦å·è¡¨ç®¡ç†
â”‚   â”œâ”€â”€ codegen.c                # TACç”Ÿæˆå’Œä¼˜åŒ–
â”‚   â”œâ”€â”€ mips_gen.c               # MIPSç›®æ ‡ä»£ç ç”Ÿæˆ
â”‚   â””â”€â”€ Makefile                 # ç¼–è¯‘é…ç½®
â”‚
â”œâ”€â”€ ç¼–è¯‘ç”Ÿæˆæ–‡ä»¶
â”‚   â”œâ”€â”€ parser.exe               # ç¼–è¯‘å™¨å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆWindowsï¼‰
â”‚   â”œâ”€â”€ parser                   # ç¼–è¯‘å™¨å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆLinux/macOSï¼‰
â”‚   â”œâ”€â”€ lex.yy.c                  # Flexç”Ÿæˆçš„è¯æ³•åˆ†æžå™¨ä»£ç 
â”‚   â”œâ”€â”€ parser.tab.c             # Bisonç”Ÿæˆçš„è¯­æ³•åˆ†æžå™¨ä»£ç 
â”‚   â”œâ”€â”€ parser.tab.h             # Bisonç”Ÿæˆçš„å¤´æ–‡ä»¶
â”‚   â”œâ”€â”€ optimized.tac             # ä¼˜åŒ–åŽçš„ä¸‰åœ°å€ç è¾“å‡º
â”‚   â””â”€â”€ output.asm               # MIPSæ±‡ç¼–ä»£ç è¾“å‡º
â”‚
â”œâ”€â”€ æµ‹è¯•æ–‡ä»¶å¤¹
â”‚   â”œâ”€â”€ lexical_analysis_tests/      # è¯æ³•åˆ†æžæµ‹è¯•ç”¨ä¾‹
â”‚   â”œâ”€â”€ syntax_analysis_tests/       # è¯­æ³•åˆ†æžæµ‹è¯•ç”¨ä¾‹
â”‚   â”œâ”€â”€ semantic_analysis_tests/      # è¯­ä¹‰åˆ†æžæµ‹è¯•ç”¨ä¾‹
â”‚   â”œâ”€â”€ tac_generation_tests/        # ä¸­é—´ä»£ç ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹
â”‚   â”œâ”€â”€ code_optimization_tests/     # ä»£ç ä¼˜åŒ–æµ‹è¯•ç”¨ä¾‹
â”‚   â””â”€â”€ mips_generation_tests/        # MIPSä»£ç ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹
â”‚
â”œâ”€â”€ æµ‹è¯•è„šæœ¬
â”‚   â”œâ”€â”€ test_lexical_analysis.py      # è¯æ³•åˆ†æžè‡ªåŠ¨åŒ–æµ‹è¯•è„šæœ¬
â”‚   â”œâ”€â”€ test_syntax_analysis.py       # è¯­æ³•åˆ†æžè‡ªåŠ¨åŒ–æµ‹è¯•è„šæœ¬
â”‚   â”œâ”€â”€ test_semantic_analysis.py     # è¯­ä¹‰åˆ†æžè‡ªåŠ¨åŒ–æµ‹è¯•è„šæœ¬
â”‚   â”œâ”€â”€ test_tac_generation.py       # TACç”Ÿæˆè‡ªåŠ¨åŒ–æµ‹è¯•è„šæœ¬
â”‚   â”œâ”€â”€ test_mips_generation.py       # MIPSç”Ÿæˆè‡ªåŠ¨åŒ–æµ‹è¯•è„šæœ¬
â”‚   â””â”€â”€ codetohtml.py                 # ä»£ç è½¬HTMLå·¥å…·
â”‚
â”œâ”€â”€ æµ‹è¯•ç»“æžœæ–‡ä»¶
â”‚   â”œâ”€â”€ lexical_analysis_test_results_final.csv
â”‚   â”œâ”€â”€ syntax_analysis_test_results_final.csv
â”‚   â”œâ”€â”€ semantic_analysis_test_results_final.csv
â”‚   â”œâ”€â”€ tac_generation_test_results_final.csv
â”‚   â”œâ”€â”€ code_optimization_test_results_final.csv
â”‚   â””â”€â”€ mips_generation_test_results_final.csv
â”‚
â”œâ”€â”€ æ–‡æ¡£æ–‡ä»¶å¤¹
â”‚   â””â”€â”€ å…¶ä½™æ–‡ä»¶/                  # å…¶ä»–æ–‡æ¡£å’Œæµ‹è¯•æ–‡ä»¶
â”‚
â””â”€â”€ README.md                   # é¡¹ç›®è¯´æ˜Žæ–‡æ¡£ï¼ˆæœ¬æ–‡æ¡£ï¼‰
```

---

## ðŸš€ å¿«é€Ÿå¼€å§‹

### çŽ¯å¢ƒè¦æ±‚

- **æ“ä½œç³»ç»Ÿ**ï¼šLinux / macOS / Windows (with MinGW/Cygwin)
- **ç¼–è¯‘å™¨**ï¼šGCC 4.8+
- **å·¥å…·é“¾**ï¼š
  - Flex 2.5+
  - Bison 3.0+
  - Make

### ç¼–è¯‘é¡¹ç›®

```bash
# æ¸…ç†æ—§æ–‡ä»¶
make clean

# ç¼–è¯‘ç¼–è¯‘å™¨
make
```

ç¼–è¯‘æˆåŠŸåŽä¼šç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ `parser`ã€‚

### è¿è¡Œç¼–è¯‘å™¨

**æ‰§è¡Œå‘½ä»¤**ï¼š
```bash
./parser æµ‹è¯•ä»£ç æ–‡ä»¶å
```

**è¯´æ˜Ž**ï¼š
- åœ¨Windowsç³»ç»Ÿä¸Šï¼Œä½¿ç”¨ `parser.exe` æˆ– `parser`ï¼ˆå–å†³äºŽç¼–è¯‘ç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶åï¼‰
- åœ¨Linux/macOSç³»ç»Ÿä¸Šï¼Œä½¿ç”¨ `./parser`
- æµ‹è¯•ä»£ç æ–‡ä»¶åº”ä¸º `.txt` æ ¼å¼çš„æºä»£ç æ–‡ä»¶

**ç¤ºä¾‹**ï¼š
```bash
# Linux/macOS
./parser lexical_analysis_tests/unit_tests/L01_keywords.txt

# Windows
parser.exe lexical_analysis_tests\unit_tests\L01_keywords.txt
```

**è¾“å‡ºè¯´æ˜Ž**ï¼š
- ç¼–è¯‘å™¨ä¼šåœ¨æŽ§åˆ¶å°è¾“å‡ºå®Œæ•´çš„ç¼–è¯‘è¿‡ç¨‹ä¿¡æ¯
- å¦‚æžœç¼–è¯‘æˆåŠŸï¼Œä¼šç”Ÿæˆ `optimized.tac`ï¼ˆä¼˜åŒ–åŽçš„ä¸‰åœ°å€ç ï¼‰å’Œ `output.asm`ï¼ˆMIPSæ±‡ç¼–ä»£ç ï¼‰
- å¦‚æžœå­˜åœ¨è¯­ä¹‰é”™è¯¯ï¼Œä¼šåœ¨æŽ§åˆ¶å°è¾“å‡ºé”™è¯¯ä¿¡æ¯ï¼Œä½†ä¸ä¼šç”Ÿæˆç›®æ ‡ä»£ç 

### è¾“å‡ºæ–‡ä»¶

è¿è¡ŒåŽä¼šç”Ÿæˆä»¥ä¸‹æ–‡ä»¶ï¼š

| æ–‡ä»¶å | è¯´æ˜Ž |
|--------|------|
| `optimized.tac` | ä¼˜åŒ–åŽçš„ä¸‰åœ°å€ç  |
| `output.asm` | MIPSæ±‡ç¼–ä»£ç  |

### åœ¨MARSä¸­è¿è¡Œ

1. ä¸‹è½½å¹¶å¯åŠ¨MARSæ¨¡æ‹Ÿå™¨
2. File â†’ Open â†’ é€‰æ‹© `output.asm`
3. Run â†’ Assemble
4. Run â†’ Go
5. åœ¨Run I/Oçª—å£æŸ¥çœ‹è¾“å…¥è¾“å‡º

---

## ðŸ“– è¯­è¨€ç‰¹æ€§

### æ”¯æŒçš„æ•°æ®ç±»åž‹

```c
int    // æ•´åž‹
float  // æµ®ç‚¹åž‹
char   // å­—ç¬¦åž‹
```

### æ”¯æŒçš„è¿ç®—ç¬¦

#### ç®—æœ¯è¿ç®—ç¬¦
```c
+  -  *  /  ++ --
```

#### å…³ç³»è¿ç®—ç¬¦
```c
==  !=  >  >=  <  <=
```

#### èµ‹å€¼è¿ç®—ç¬¦
```c
=  +=  -=  *=  /=
```

### æ”¯æŒçš„æŽ§åˆ¶ç»“æž„

```c
if (condition) { ... }
if (condition) { ... } else { ... }
while (condition) { ... }
for (init; cond; update;) { ... }
break;
continue;
```

### æ”¯æŒçš„I/O

```c
scan variable;       // è¾“å…¥
print expression;    // è¾“å‡º
```

### æ•°ç»„æ”¯æŒ

```c
int arr[10];           // ä¸€ç»´æ•°ç»„
int matrix[3][4];      // äºŒç»´æ•°ç»„
char cube[2][3][5];    // å¤šç»´æ•°ç»„
```

### æ³¨é‡Š

```c
// è¡Œæ³¨é‡Š

/* å—æ³¨é‡Š */
```

---

## ðŸ” ç¼–è¯‘å™¨å„é˜¶æ®µè¾“å‡º

### 1. æºä»£ç æ˜¾ç¤º

```
========== æºä»£ç  ==========
int a;
int b;
{
    a = 10;
    b = 20;
    print a + b;
}
============================
```

### 2. è¯æ³•åˆ†æžç»“æžœ

```
========================================
è¯æ³•åˆ†æž (Lexical Analysis)
========================================
+----+-------------------+----------------+
| è¡Œ | Token             | Tokenç±»åž‹      |
+----+-------------------+----------------+
|  1 | int               | TYPE_INT       |
|  1 | a                 | ID             |
|  1 | ;                 | SEMI           |
...
```

### 3. æŠ½è±¡è¯­æ³•æ ‘ï¼ˆASTï¼‰

```
========== æŠ½è±¡è¯­æ³•æ ‘ ==========
NODE_PROGRAM
  NODE_STMLIST
    NODE_VAR_DECL (int)
      Var: a
    NODE_STMLIST
      NODE_VAR_DECL (int)
        Var: b
...
```

### 4. è¯­ä¹‰åˆ†æž

```
========================================
è¯­ä¹‰åˆ†æž (Semantic Analysis)
========================================
[ç¬¦å·è¡¨] è¿›å…¥ä½œç”¨åŸŸ level=0
[ç¬¦å·è¡¨] å£°æ˜Žå˜é‡ a ç±»åž‹=int
[ç¬¦å·è¡¨] å£°æ˜Žå˜é‡ b ç±»åž‹=int
...
```

### 5. ä¸‰åœ°å€ç ï¼ˆåŽŸå§‹ï¼‰

```
===== TAC (ä¸‰åœ°å€ç ï¼ŒåŽŸå§‹) =====
t0 = 10
a = t0
t1 = 20
b = t1
t2 = a + b
print t2
===== TAC End =====
```

### 6. ä»£ç ä¼˜åŒ–

```
===== ä¼˜åŒ–è¯¦æƒ… =====
[å¸¸é‡æŠ˜å ] t0 = 10 â†’ (å¸¸é‡)
[å¸¸é‡æŠ˜å ] t1 = 20 â†’ (å¸¸é‡)
[CSE] t2 = a + b (æ–°å»º)
====================
```

### 7. ä¸‰åœ°å€ç ï¼ˆä¼˜åŒ–åŽï¼‰

```
===== TAC (ä¸‰åœ°å€ç ï¼Œä¼˜åŒ–åŽ) =====
a = 10
b = 20
t2 = a + b
print t2
===== TAC End =====
```

### 8. MIPSæ±‡ç¼–ä»£ç 

```
========================================
ç”ŸæˆMIPSæ±‡ç¼–ä»£ç 
========================================

[MIPSç”Ÿæˆ] ä»£ç å·²å†™å…¥: output.asm
[å¯„å­˜å™¨åˆ†é…] ä½¿ç”¨äº† 3 ä¸ªå˜é‡
[æ ˆç®¡ç†] æœ€å¤§æ ˆå¤§å°: 12 å­—èŠ‚
========================================
```

---

## ðŸ§ª æµ‹è¯•æ¡ˆä¾‹

### æµ‹è¯•1ï¼šåŸºæœ¬åŠŸèƒ½æµ‹è¯•

**æ–‡ä»¶**ï¼š`test_required.txt`

**å†…å®¹**ï¼šæµ‹è¯•æ‰€æœ‰åŸºæœ¬è¯­æ³•ç‰¹æ€§

### æµ‹è¯•2ï¼šè¯­ä¹‰é”™è¯¯æµ‹è¯•

**æ–‡ä»¶**ï¼š`semantic_errors.txt`

**å†…å®¹**ï¼šè§¦å‘å…¨éƒ¨26ç§è¯­ä¹‰é”™è¯¯

### æµ‹è¯•3ï¼šä¼˜åŒ–æµ‹è¯•

**æ–‡ä»¶**ï¼š`test_opt.txt`

**å†…å®¹**ï¼šæµ‹è¯•4ç§ä»£ç ä¼˜åŒ–æŠ€æœ¯

### æµ‹è¯•4ï¼šMIPSç”Ÿæˆæµ‹è¯•

**æ–‡ä»¶**ï¼š`test_mips.txt`

**å†…å®¹**ï¼šæµ‹è¯•MIPSä»£ç ç”Ÿæˆå’Œå¯„å­˜å™¨åˆ†é…

---

## ðŸŽ¯ è¯­ä¹‰è§„åˆ™ï¼ˆ26ç±»ï¼‰

### å£°æ˜Žç›¸å…³ï¼ˆ5ç±»ï¼‰

1. é‡å¤å®šä¹‰æ ‡è¯†ç¬¦
2. ä½¿ç”¨æœªå£°æ˜Žçš„å˜é‡
3. å˜é‡åœ¨åˆå§‹åŒ–å‰è¢«ä½¿ç”¨
4. scanä½œç”¨äºŽæœªå£°æ˜Žå˜é‡
5. æ•°ç»„ç»´åº¦å¿…é¡»ä¸ºæ­£æ•´æ•°

### æ•°ç»„ç›¸å…³ï¼ˆ6ç±»ï¼‰

6. æ•°ç»„å£°æ˜Žç¼ºå°‘ç»´åº¦
7. æ•°ç»„ç»´åº¦å¿…é¡»ä¸ºæ­£æ•´æ•°
8. å¯¹éžæ•°ç»„å¯¹è±¡ä½¿ç”¨ä¸‹æ ‡
9. æ•°ç»„ä¸‹æ ‡å¿…é¡»æ˜¯æ•´åž‹
10. æ•°ç»„ä¸èƒ½ç›´æŽ¥å‚ä¸Žç®—æœ¯è¿ç®—
11. æ•°ç»„ä¸èƒ½ç›´æŽ¥å‚ä¸Žæ¯”è¾ƒ

### èµ‹å€¼ç›¸å…³ï¼ˆ4ç±»ï¼‰

12. èµ‹å€¼å·¦ä¾§ä¸æ˜¯å·¦å€¼
13. èµ‹å€¼æ“ä½œæ•°å¿…é¡»æ˜¯æ•°å€¼ç±»åž‹
14. ä¸å…è®¸å°†floatèµ‹ç»™int
15. åªèƒ½å‘charèµ‹charå€¼

### è¿ç®—ç›¸å…³ï¼ˆ3ç±»ï¼‰

16. è‡ªå¢žè‡ªå‡éœ€è¦å·¦å€¼
17. ä¸èƒ½å¯¹æ•°ç»„æ•´ä½“è‡ªå¢žè‡ªå‡
18. è‡ªå¢žè‡ªå‡æ“ä½œæ•°å¿…é¡»ä¸ºæ•°å€¼ç±»åž‹

### æŽ§åˆ¶æµç›¸å…³ï¼ˆ5ç±»ï¼‰

19. ifæ¡ä»¶åº”ä¸ºæ•°å€¼/å¸ƒå°”è¡¨è¾¾å¼
20. whileæ¡ä»¶åº”ä¸ºæ•°å€¼/å¸ƒå°”è¡¨è¾¾å¼
21. foræ¡ä»¶åº”ä¸ºæ•°å€¼/å¸ƒå°”è¡¨è¾¾å¼
22. breakåªèƒ½å‡ºçŽ°åœ¨å¾ªçŽ¯å†…éƒ¨
23. continueåªèƒ½å‡ºçŽ°åœ¨å¾ªçŽ¯å†…éƒ¨

### I/Oç›¸å…³ï¼ˆ3ç±»ï¼‰

24. printä¸æ”¯æŒç›´æŽ¥è¾“å‡ºæ•°ç»„
25. scanä½œç”¨äºŽæœªå£°æ˜Žå˜é‡
26. scanä¸æ”¯æŒå¯¹æ•´ä¸ªæ•°ç»„æ“ä½œ

è¯¦è§ï¼š[SEMANTIC_RULES.md](SEMANTIC_RULES.md)

---

## âš¡ ä¼˜åŒ–æŠ€æœ¯ï¼ˆ4ç§ï¼‰

### 1. å¾ªçŽ¯ä¸å˜ä»£ç å¤–æï¼ˆLICMï¼‰

**åŽŸç†**ï¼šå°†å¾ªçŽ¯å†…ä¸éšè¿­ä»£æ”¹å˜çš„è®¡ç®—ç§»åˆ°å¾ªçŽ¯å¤–

**ç¤ºä¾‹**ï¼š
```c
while (i < 10) {
    y = c + 50;    // cå’Œ50éƒ½ä¸å˜
    arr[i] = y;
    i++;
}
```

**ä¼˜åŒ–åŽ**ï¼š
```c
y = c + 50;        // å¤–æ
while (i < 10) {
    arr[i] = y;
    i++;
}
```

### 2. å¸¸é‡æŠ˜å 

**åŽŸç†**ï¼šç¼–è¯‘æœŸè®¡ç®—å¸¸é‡è¡¨è¾¾å¼

**ç¤ºä¾‹**ï¼š
```c
a = 2 + 3;    // ä¼˜åŒ–ä¸º a = 5
```

### 3. å…¬å…±å­è¡¨è¾¾å¼æ¶ˆé™¤ï¼ˆCSEï¼‰

**åŽŸç†**ï¼šè¯†åˆ«é‡å¤è®¡ç®—ï¼Œå¤ç”¨ç»“æžœ

**ç¤ºä¾‹**ï¼š
```c
x = a + b;
y = a + b;    // å¤ç”¨xçš„ç»“æžœ
```

### 4. çª¥å­”ä¼˜åŒ–

**åŽŸç†**ï¼šå±€éƒ¨æŒ‡ä»¤æ¨¡å¼ä¼˜åŒ–

**ç¤ºä¾‹**ï¼š
```c
goto L1;
L1:           // æ¶ˆé™¤å†—ä½™goto
```

è¯¦è§ï¼š[OPTIMIZATION_TEST.md](OPTIMIZATION_TEST.md)

---

## ðŸ–¥ï¸ MIPSä»£ç ç”Ÿæˆ

### å¯„å­˜å™¨åˆ†é…ç­–ç•¥

#### ä½¿ç”¨çš„å¯„å­˜å™¨

- **$t0-$t9**ï¼ˆ10ä¸ªï¼‰ï¼šä¸´æ—¶å˜é‡
- **$s0-$s7**ï¼ˆ8ä¸ªï¼‰ï¼šç”¨æˆ·å˜é‡
- **$sp**ï¼šæ ˆæŒ‡é’ˆ
- **$v0, $a0**ï¼šç³»ç»Ÿè°ƒç”¨

#### åˆ†é…ç®—æ³•

1. **ä¼˜å…ˆç©ºé—²å¯„å­˜å™¨**
2. **åˆ†ç±»åˆ†é…**ï¼š
   - ä¸´æ—¶å˜é‡ â†’ $tå¯„å­˜å™¨
   - ç”¨æˆ·å˜é‡ â†’ $så¯„å­˜å™¨
3. **LRUæ›¿æ¢**ï¼šæ— ç©ºé—²æ—¶æ›¿æ¢æœ€ä¹…æœªç”¨çš„å¯„å­˜å™¨
4. **æº¢å‡ºå¤„ç†**ï¼šè‡ªåŠ¨ä¿å­˜åˆ°æ ˆ

#### æ ˆå¸§ç®¡ç†

```
é«˜åœ°å€
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   å˜é‡n     â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚   ...       â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚   å˜é‡1     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â† $sp
ä½Žåœ°å€
```

è¯¦è§ï¼š[MIPS_GENERATION.md](MIPS_GENERATION.md)

---

## ðŸ“Š æ€§èƒ½ç»Ÿè®¡ç¤ºä¾‹

```bash
$ ./parser test_mips.txt

========== æºä»£ç  ==========
...
============================

========================================
è¯æ³•åˆ†æž (Lexical Analysis)
========================================
...

========== æŠ½è±¡è¯­æ³•æ ‘ ==========
...
================================

========================================
è¯­ä¹‰åˆ†æž (Semantic Analysis)
========================================
[ç¬¦å·è¡¨] ä½¿ç”¨äº† 15 ä¸ªå˜é‡
[è¯­ä¹‰æ£€æŸ¥] é€šè¿‡ï¼Œæ— é”™è¯¯
========================================

===== TAC (ä¸‰åœ°å€ç ï¼ŒåŽŸå§‹) =====
å…±ç”Ÿæˆ 87 æ¡æŒ‡ä»¤
===== TAC End =====

===== ä¼˜åŒ–è¯¦æƒ… =====
[å¸¸é‡æŠ˜å ] 10 æ¬¡
[CSE] 5 æ¬¡
[LICM] 2 æ¬¡
[çª¥å­”ä¼˜åŒ–] 3 æ¬¡
====================

===== TAC (ä¸‰åœ°å€ç ï¼Œä¼˜åŒ–åŽ) =====
å…±ç”Ÿæˆ 72 æ¡æŒ‡ä»¤ï¼ˆå‡å°‘ 17.2%ï¼‰
===== TAC End =====

========================================
ç”ŸæˆMIPSæ±‡ç¼–ä»£ç 
========================================
[MIPSç”Ÿæˆ] ä»£ç å·²å†™å…¥: output.asm
[å¯„å­˜å™¨åˆ†é…] ä½¿ç”¨äº† 15 ä¸ªå˜é‡
[æ ˆç®¡ç†] æœ€å¤§æ ˆå¤§å°: 60 å­—èŠ‚
========================================
```

---

## ðŸ“š å®Œæ•´æ–‡æ¡£ç´¢å¼•

### è¯­è¨€è§„èŒƒ

- [LANGUAGE_SPECIFICATION.md](LANGUAGE_SPECIFICATION.md) - å®Œæ•´è¯­è¨€å®šä¹‰
- [LANGUAGE_FEATURES.md](LANGUAGE_FEATURES.md) - è¯­è¨€ç‰¹æ€§å¿«é€Ÿå‚è€ƒ

### ç¼–è¯‘å„é˜¶æ®µ

- [LEXICAL_ANALYSIS_OUTPUT.md](LEXICAL_ANALYSIS_OUTPUT.md) - è¯æ³•åˆ†æž
- [SEMANTIC_RULES.md](SEMANTIC_RULES.md) - è¯­ä¹‰åˆ†æžè§„åˆ™

### ä¼˜åŒ–ä¸Žä»£ç ç”Ÿæˆ

- [OPTIMIZATION_TEST.md](OPTIMIZATION_TEST.md) - ä¼˜åŒ–æŠ€æœ¯è¯´æ˜Ž
- [LICM_IMPLEMENTATION.md](LICM_IMPLEMENTATION.md) - LICMå®žçŽ°è¯¦è§£
- [LICM_ALGORITHM_EXAMPLE.md](LICM_ALGORITHM_EXAMPLE.md) - LICMç®—æ³•ç¤ºä¾‹
- [MIPS_GENERATION.md](MIPS_GENERATION.md) - MIPSä»£ç ç”Ÿæˆ

---

## ðŸ› å¸¸è§é—®é¢˜

### Q1: ç¼–è¯‘æ—¶æŠ¥é”™ "command not found: flex"

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# Ubuntu/Debian
sudo apt-get install flex bison

# macOS
brew install flex bison

# Windows
# å®‰è£…MinGWæˆ–Cygwinï¼ŒåŒ…å«flexå’Œbison
```

### Q2: MIPSä»£ç åœ¨MARSä¸­è¿è¡Œå‡ºé”™

**æ£€æŸ¥é¡¹**ï¼š
1. æ˜¯å¦ä½¿ç”¨äº†MARS 4.5æˆ–æ›´é«˜ç‰ˆæœ¬
2. æ˜¯å¦æ­£ç¡®Assemble
3. æŸ¥çœ‹Run I/Oçª—å£çš„é”™è¯¯ä¿¡æ¯

### Q3: è¯­ä¹‰é”™è¯¯ä½†æ²¡æœ‰è¾“å‡ºé”™è¯¯ä¿¡æ¯

**åŽŸå› **ï¼šè¯­æ³•åˆ†æžå¤±è´¥ä¼šé˜»æ­¢è¯­ä¹‰åˆ†æž

**è§£å†³æ–¹æ¡ˆ**ï¼šå…ˆæ£€æŸ¥è¯­æ³•æ˜¯å¦æ­£ç¡®

### Q4: ä¼˜åŒ–åŽTACæŒ‡ä»¤æ•°æ²¡æœ‰å‡å°‘

**åŽŸå› **ï¼šæºä»£ç æœ¬èº«å·²ç»å¾ˆä¼˜åŒ–ï¼Œæˆ–ä¸æ»¡è¶³ä¼˜åŒ–æ¡ä»¶

**å»ºè®®**ï¼šä½¿ç”¨ `test_opt.txt` æµ‹è¯•ä¼˜åŒ–æ•ˆæžœ

---

## ðŸŽ“ å­¦ä¹ å»ºè®®

### å¯¹äºŽåˆå­¦è€…

1. **å…ˆé˜…è¯»è¯­è¨€è§„èŒƒ**ï¼š[LANGUAGE_FEATURES.md](LANGUAGE_FEATURES.md)
2. **è¿è¡Œæµ‹è¯•æ¡ˆä¾‹**ï¼šä»Ž `test_required.txt` å¼€å§‹
3. **è§‚å¯Ÿå„é˜¶æ®µè¾“å‡º**ï¼šç†è§£ç¼–è¯‘æµç¨‹
4. **åœ¨MARSä¸­è¿è¡Œ**ï¼šæŸ¥çœ‹å®žé™…æ‰§è¡Œæ•ˆæžœ

### å¯¹äºŽæ·±å…¥å­¦ä¹ 

1. **é˜…è¯»å®Œæ•´è§„èŒƒ**ï¼š[LANGUAGE_SPECIFICATION.md](LANGUAGE_SPECIFICATION.md)
2. **ç ”ç©¶ä¼˜åŒ–ç®—æ³•**ï¼š[LICM_IMPLEMENTATION.md](LICM_IMPLEMENTATION.md)
3. **åˆ†æžå¯„å­˜å™¨åˆ†é…**ï¼š[MIPS_GENERATION.md](MIPS_GENERATION.md)
4. **ä¿®æ”¹å’Œæ‰©å±•**ï¼šæ·»åŠ æ–°ç‰¹æ€§æˆ–ä¼˜åŒ–

---

## ðŸ”§ æŠ€æœ¯ç»†èŠ‚

### å·¥å…·é“¾ç‰ˆæœ¬

- Flex: 2.6.4
- Bison: 3.8.2
- GCC: 11.4.0

### ä»£ç ç»Ÿè®¡

| æ–‡ä»¶ | è¡Œæ•° | è¯´æ˜Ž |
|------|------|------|
| lex.l | 150 | è¯æ³•åˆ†æžå™¨å®šä¹‰ |
| parser.y | 494 | è¯­æ³•åˆ†æžå™¨å®šä¹‰ |
| displayAST.c | 300 | ASTæž„å»ºå’Œæ˜¾ç¤º |
| semantics.c | 450 | è¯­ä¹‰åˆ†æž |
| codegen.c | 850 | TACç”Ÿæˆå’Œä¼˜åŒ– |
| mips_gen.c | 650 | MIPSä»£ç ç”Ÿæˆ |
| **æ€»è®¡** | **2894** | **æ ¸å¿ƒä»£ç ** |

### æ€§èƒ½æŒ‡æ ‡

- **ç¼–è¯‘é€Ÿåº¦**ï¼š~10msï¼ˆå°ç¨‹åºï¼‰
- **ä¼˜åŒ–çŽ‡**ï¼š10-30%æŒ‡ä»¤å‡å°‘
- **å¯„å­˜å™¨åˆ©ç”¨çŽ‡**ï¼š80-90%

---

## ðŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®ä¸ºæ•™å­¦é¡¹ç›®ï¼Œä»…ä¾›å­¦ä¹ ä½¿ç”¨ã€‚

---

## ðŸ‘¥ è´¡çŒ®è€…

- ç¼–è¯‘åŽŸç†è¯¾ç¨‹é¡¹ç›®ç»„

---

## ðŸ“ž è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š

- æäº¤Issue
- å‘é€é‚®ä»¶

---

**æœ€åŽæ›´æ–°**ï¼š2025å¹´12æœˆ9æ—¥  
**ç‰ˆæœ¬**ï¼šv1.0

